<div class="home-container">
  <div class="hero-section">
    <h1>Cooking Inspiration, Quickly!</h1>
    <p class="subtitle">Describe what kind of food you want, and we'll generate a recipe for you.</p>
    
    <div class="search-area">
      <mat-form-field appearance="outline" class="search-field">
        <mat-label>What would you like to cook?</mat-label>
        <input
          matInput
          placeholder="E.g., Spicy Chicken Curry"
          [(ngModel)]="recipeQuery" />
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
      <button mat-flat-button class="search-button" (click)="onSearch()">
        Generate Recipe
      </button>
    </div>
  </div>

  <div class="loading-container" *ngIf="isLoading">
    <mat-progress-spinner mode="indeterminate" diameter="40"></mat-progress-spinner>
    <p>Creating your recipe...</p>
  </div>
  
  <!-- Main Recipe Result -->
  <div class="recipe-result-container" *ngIf="recipe">
    <h2 class="section-title">Your Generated Recipe</h2>
    <div class="recipe-card">
      <div class="recipe-header">
        <div>
          <h2 class="recipe-title">{{ recipe.recipeName }}</h2>
          <span class="recipe-type">{{ recipe.recipeType }}</span>
        </div>
      </div>
      
      <p class="recipe-description">{{ recipe.recipeDescription }}</p>
      
      <div class="recipe-stats">
        <div class="stat-item">
          <mat-icon>timer</mat-icon>
          <span><strong>Prep:</strong> {{ recipe.recipePrepTime }} min</span>
        </div>
        <div class="stat-item">
          <mat-icon>outdoor_grill</mat-icon>
          <span><strong>Cook:</strong> {{ recipe.recipeCookTime }} min</span>
        </div>
        <div class="stat-item">
          <mat-icon>star</mat-icon>
          <span><strong>Rating:</strong> {{ recipe.averageRecipeRating }}/5</span>
        </div>
      </div>
      
      <div class="recipe-content">
        <div class="ingredients" *ngIf="recipe.ingredients?.length">
          <h3>Ingredients</h3>
          <ul>
            <li *ngFor="let ingredient of recipe.ingredients">
              {{ ingredient.ingredientQuantity }} {{ ingredient.ingredientName }}
            </li>
          </ul>
        </div>
        
        <div class="steps" *ngIf="recipe.recipeSteps?.length">
          <h3>Instructions</h3>
          <ol>
            <li *ngFor="let step of recipe.recipeSteps">
              {{ step.stepDescription }}
            </li>
          </ol>
        </div>
      </div>
      
      <div class="notes" *ngIf="recipe.recipeNotes?.length">
        <h3>Chef's Notes</h3>
        <ul>
          <li *ngFor="let note of recipe.recipeNotes">{{ note }}</li>
        </ul>
      </div>
      
      <div class="recipe-footer">
        <span class="recipe-date">Created on {{ recipe.recipeCreatedDate | date:'mediumDate' }}</span>
        <div class="recipe-actions">
          <button mat-button class="action-button edit">
            <mat-icon>edit</mat-icon> Edit
          </button>
          <button mat-button class="action-button save">
            <mat-icon>bookmark</mat-icon> Save
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Browse Recipes Section -->
  <div class="browse-recipes-section">
    <h2 class="section-title">Browse Recipes</h2>
    <div class="recipe-filter">
      <mat-button-toggle-group #recipeView="matButtonToggleGroup">
        <mat-button-toggle value="recent" (click)="onShowMoreRecentRecipes()">
          <mat-icon>public</mat-icon>
          Trending Recipes
        </mat-button-toggle>
        <mat-button-toggle value="my" (click)="onShowMoreUserRecipes()">
          <mat-icon>person</mat-icon>
          My Recipes
        </mat-button-toggle>
      </mat-button-toggle-group>
    </div>
    
    <div class="recipes-grid" *ngIf="recentRecipes && recentRecipes.length">
      <div *ngFor="let rec of recentRecipes" class="recipe-card">
        <div class="recipe-header">
          <div>
            <h2 class="recipe-title">{{ rec.recipeName }}</h2>
            <span class="recipe-type">{{ rec.recipeType }}</span>
          </div>
        </div>
        
        <p class="recipe-description">{{ rec.recipeDescription }}</p>
        
        <div class="recipe-stats">
          <div class="stat-item">
            <mat-icon>timer</mat-icon>
            <span><strong>Prep:</strong> {{ rec.recipePrepTime }} min</span>
          </div>
          <div class="stat-item">
            <mat-icon>outdoor_grill</mat-icon>
            <span><strong>Cook:</strong> {{ rec.recipeCookTime }} min</span>
          </div>
          <div class="stat-item">
            <mat-icon>star</mat-icon>
            <span><strong>Rating:</strong> {{ rec.averageRecipeRating }}/5</span>
          </div>
        </div>
        
        <div class="recipe-content">
          <div class="ingredients" *ngIf="rec.ingredients?.length">
            <h3>Ingredients</h3>
            <ul>
              <li *ngFor="let ingredient of rec.ingredients">
                {{ ingredient.ingredientQuantity }} {{ ingredient.ingredientUnit }} {{ ingredient.ingredientName }}
              </li>
            </ul>
          </div>
          
          <div class="steps" *ngIf="rec.recipeSteps?.length">
            <h3>Instructions</h3>
            <ol>
              <li *ngFor="let step of rec.recipeSteps">
                {{ step.stepDescription }}
              </li>
            </ol>
          </div>
        </div>

        <div class="notes" *ngIf="rec.recipeNotes?.length">
          <h3>Chef's Notes</h3>
          <ul>
            <li *ngFor="let note of rec.recipeNotes">{{ note }}</li>
          </ul>
        </div>
        
        <div class="recipe-footer">
          <span class="recipe-date">Created on {{ rec.recipeCreatedDate | date:'mediumDate' }}</span>
          <div class="recipe-actions">
            <button mat-button *ngIf="recipeView.value === 'my'" class="action-button edit">
              <mat-icon>edit</mat-icon> Edit
            </button>
            
            <!-- Only show Save button for Recent Recipes -->
            <button *ngIf="recipeView.value === 'recent'" mat-button class="action-button save" (click)="saveRecipe(rec.recipeId)">
              <mat-icon>bookmark</mat-icon> Save
            </button>
            
            <!-- Only show Delete button for My Recipes -->
            <button *ngIf="recipeView.value === 'my'" mat-button class="action-button delete">
              <mat-icon>delete</mat-icon> Delete
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>